<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统维护 - 工控数据管理系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Microsoft YaHei', sans-serif;
            font-size: 14px;
            color: #444;
        }
        
        .container {
            display: flex;
            width: 1100px;
            min-height: 800px;
            margin: 20px auto;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        /* 左侧菜单 - 复用原有样式 */
        .sidebar {
            width: 210px;
            background: linear-gradient(180deg, #5DD5E1 0%, #4ECAE3 100%);
            color: white;
            flex-shrink: 0;
        }
        
        .logo {
            height: 104px;
            display: flex;
            align-items: center;
            padding: 0 31px;
        }
        
        .logo img {
            width: 142px;
            height: 42px;
        }
        
        .menu-item {
            height: 40px;
            display: flex;
            align-items: center;
            padding: 10px 29px;
            cursor: pointer;
            transition: all 0.3s;
            gap: 10px;
        }
        
        .menu-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .menu-item.active {
            background: rgba(255, 255, 255, 1);
            margin: 0 8px;
            border-radius: 10px;
            box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.07);
        }
        
        .menu-item.active span {
            color: #4ECAE3 !important;
        }
        
        .menu-item img {
            width: 16px;
            height: 14px;
        }
        
        .menu-item span {
            font-size: 14px;
        }
        
        /* 右侧内容区 */
        .main-content {
            flex: 1;
            background: #F0F9F9;
            display: flex;
            flex-direction: column;
        }
        
        /* 顶部导航 */
        .header {
            height: 60px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 27px;
            box-shadow: -2px 2px 5px 0px rgba(0,0,0,0.06);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .home-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            border: 1px solid #4ECAE3;
            border-radius: 3px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .home-btn:hover {
            background: #4ECAE3;
            color: white;
        }
        
        .home-btn img {
            width: 14px;
            height: 14px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .lang-switch {
            display: flex;
            align-items: center;
            padding: 0 8px;
            height: 32px;
            border: 1px solid #EBEBEB;
            border-radius: 3px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .lang-switch:hover {
            border-color: #4ECAE3;
        }
        
        .lang-switch img {
            width: 14px;
            height: 14px;
        }
        
        .lang-switch span {
            margin: 0 5px;
            color: #444;
            font-size: 14px;
        }
        
        /* 内容区域 */
        .content {
            flex: 1;
            background: white;
            margin: 5px 9px;
            padding: 30px 40px;
            border-radius: 8px;
            display: flex;
            gap: 40px;
        }
        
        /* 左侧功能区 */
        .left-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* 功能卡片 */
        .function-card {
            display: flex;
            flex-direction: column;
            background: white;
            border: 1px solid #EBEBEB;
            border-radius: 8px;
            padding: 20px 25px;
        }
        
        .function-title {
            font-size: 15px;
            font-weight: 500;
            color: #333;
            margin-bottom: 15px;
        }
        
        .function-content {
            display: flex;
            gap: 15px;
        }
        
        /* 按钮样式 */
        .action-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            background: #5DD5E1;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            height: 36px;
            width: auto;
        }
        
        .action-btn:hover {
            background: #4BC8D6;
        }
        
        /* 帮助文档链接 */
        .help-link {
            color: #4ECAE3;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }
        
        .help-link:hover {
            color: #3DB8D0;
            text-decoration: underline;
        }
        
        /* 文件上传区域 */
        .upload-area {
            border: 2px dashed #E5E7EB;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            background: #FAFAFA;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: #4ECAE3;
            background: #F0FFFE;
        }
        
        .upload-icon {
            font-size: 48px;
            color: #D1D5DB;
            margin-bottom: 10px;
        }
        
        .upload-text {
            color: #6B7280;
            font-size: 14px;
        }
        
        /* 右侧信息区 */
        .right-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* 信息卡片 */
        .info-card {
            background: white;
            border: 1px solid #EBEBEB;
            border-radius: 8px;
            padding: 20px 25px;
        }
        
        .info-title {
            font-size: 15px;
            font-weight: 500;
            color: #333;
            margin-bottom: 0;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #F0F0F0;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            color: #666;
            font-size: 14px;
        }
        
        .info-value {
            color: #333;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* 输入文件 */
        input[type="file"] {
            display: none;
        }
        
        /* 提示文本 */
        .hint-text {
            color: #999;
            font-size: 12px;
            margin-top: 10px;
        }
        
        /* 弹窗遮罩 */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        /* 弹窗内容 */
        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 30px;
            width: 500px;
            max-height: 600px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }
        
        .modal-header {
            font-size: 18px;
            font-weight: 500;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .modal-body {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .log-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .log-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #F9FAFB;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        
        .log-item:hover {
            background: #F0F9F9;
            border-color: #5DD5E1;
        }
        
        .log-item.selected {
            background: #E0F7FA;
            border-color: #5DD5E1;
        }
        
        .log-checkbox {
            width: 18px;
            height: 18px;
            margin-right: 12px;
            cursor: pointer;
        }
        
        .log-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .log-name {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }
        
        .log-meta {
            font-size: 12px;
            color: #999;
            display: flex;
            gap: 15px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding-top: 20px;
            border-top: 1px solid #E5E7EB;
        }
        
        .modal-btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
            min-width: 50px;
        }
        
        .modal-btn-primary {
            background: #5DD5E1;
            color: white;
            border: none;
        }
        
        .modal-btn-primary:hover {
            background: #4BC8D6;
        }
        
        .modal-btn-secondary {
            background: white;
            color: #666;
            border: 1px solid #E5E7EB;
        }
        
        .modal-btn-secondary:hover {
            background: #F9FAFB;
            border-color: #D1D5DB;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 左侧菜单 -->
        <div class="sidebar">
            <div class="logo">
                <div style="width: 142px; height: 42px; background-color: rgba(255, 255, 255, 0.2); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px;">工控系统</div>
            </div>
            
            <div class="menu-item">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><rect x='4' y='4' width='16' height='12' rx='2'/><path d='m4 18 16-12'/></svg>" alt="设备管理">
                <span data-lang="deviceManagement">设备管理</span>
            </div>
            
            <div class="menu-item">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><path d='M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z'/><polyline points='14,2 14,8 20,8'/><line x1='16' y1='13' x2='8' y2='13'/><line x1='16' y1='17' x2='8' y2='17'/><polyline points='10,9 9,9 8,9'/></svg>" alt="数据">
                <span data-lang="data">数据</span>
            </div>
            
            <div class="menu-item">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><circle cx='12' cy='12' r='1'/><circle cx='12' cy='12' r='5'/><circle cx='12' cy='12' r='9'/></svg>" alt="网关状态">
                <span data-lang="gatewayStatus">网关状态</span>
            </div>
            
            <div class="menu-item">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><polyline points='4 17 10 11 4 5'/><line x1='12' y1='19' x2='20' y2='19'/></svg>" alt="指令配置">
                <span data-lang="commandConfig">指令配置</span>
            </div>
            
            <div class="menu-item active">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234ECAE3' stroke-width='2'><path d='M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z'/></svg>" alt="系统维护">
                <span data-lang="systemMaintenance">系统维护</span>
            </div>
            
            <div class="menu-item">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><circle cx='12' cy='12' r='3'/><path d='m12 1 2.09 5.26L22 8l-3.74 3.25L19 20l-7-3.51L5 20l.74-8.75L2 8l7.91-1.74L12 1z'/></svg>" alt="高级设置">
                <span data-lang="advancedSettings">高级设置</span>
            </div>
            
            <div class="menu-item">
                <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><path d='m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z'/><line x1='12' y1='9' x2='12' y2='13'/><line x1='12' y1='17' x2='12.01' y2='17'/></svg>" alt="告警信息">
                <span data-lang="alertInfo">告警信息</span>
            </div>
        </div>
        
        <!-- 右侧内容 -->
        <div class="main-content">
            <!-- 顶部导航 -->
            <div class="header">
                <div class="header-left">
                    <button class="home-btn" onclick="window.location.href='restored_index.html'">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%234ECAE3' stroke-width='2'><path d='m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z'/><polyline points='9,22 9,12 15,12 15,22'/></svg>" alt="首页">
                        <span data-lang="returnHome">返回首页</span>
                    </button>
                </div>
                <div class="header-right">
                    <div style="width: 70px; height: 32px; background-color: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #999; font-size: 12px;">LOGO</div>
                    <div class="lang-switch" onclick="toggleLanguage()">
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23444' stroke-width='2'><circle cx='12' cy='12' r='10'/><line x1='2' y1='12' x2='22' y2='12'/><path d='m12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z'/></svg>" alt="语言">
                        <span data-lang="langText">中文简体</span>
                        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23444' stroke-width='2'><polyline points='6 9 12 15 18 9'/></svg>" style="width: 13px; height: 7px; margin-left: 5px;" alt="下拉">
                    </div>
                </div>
            </div>
            
            <!-- 内容区 -->
            <div class="content">
                <!-- 左侧功能区 -->
                <div class="left-section">
                    <!-- 帮助 -->
                    <div class="function-card">
                        <h2 class="function-title" data-lang="help">帮助</h2>
                        <div class="function-content">
                            <button class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 140px;" onclick="window.open('#')">
                                <span data-lang="viewHelp">查看帮助文档</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 出厂设置 -->
                    <div class="function-card">
                        <h2 class="function-title" data-lang="factoryReset">出厂设置</h2>
                        <div class="function-content" style="display: flex; gap: 10px;">
                            <button class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 140px;" onclick="confirmFactoryReset()">
                                <span data-lang="resetToFactory">恢复出厂设置</span>
                            </button>
                            <button class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 100px;" onclick="restoreSettings()">
                                <span data-lang="restoreSettings">重启设备</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 固件更新 -->
                    <div class="function-card">
                        <h2 class="function-title" data-lang="firmwareUpdate">固件更新</h2>
                        <div class="function-content">
                            <button class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 100px;" onclick="updateFirmware()">
                                <span data-lang="updateFirmware">固件更新</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 日志下载 -->
                    <div class="function-card">
                        <h2 class="function-title" data-lang="logDownload">日志下载</h2>
                        <div class="function-content" style="display: flex; flex-direction: column; gap: 15px;">
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <div style="display: flex; flex-direction: column; gap: 5px;">
                                    <div style="display: flex; gap: 10px; align-items: center;">
                                        <button id="logUploadBtn" class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 100px;" onclick="uploadSystemLogs()" disabled>
                                            <span data-lang="uploadLog">上传日志</span>
                                        </button>
                                        <button class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 100px;" onclick="window.location.href='log-selection.html'">
                                            <span data-lang="downloadLog">日志下载</span>
                                        </button>
                                    </div>
                                    
                                </div>
                                <span id="uploadStatus" style="font-size: 14px; color: #666;"></span>
                            </div>
                            <div id="uploadRetry" style="display: none; margin-top: 5px;">
                                <button class="action-btn" style="background: #5DD5E1; padding: 8px 20px; font-size: 14px; width: 120px;" onclick="uploadSystemLogs()">
                                    <span data-lang="retryUpload">再次上传</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧信息区 -->
                <div class="right-section">
                    <!-- 套餐信息 -->
                    <div class="info-card">
                        <h2 class="info-title" data-lang="packageInfo">套餐信息</h2>
                        <div style="margin-top: 20px;">
                            <p style="color: #999; font-size: 13px; margin-bottom: 5px;"><span data-lang="currentPackage">当前套餐</span>：house</p>
                        </div>
                        <div style="margin-top: 20px; text-align: right;">
                            <a href="#" style="color: #5DD5E1; text-decoration: none; font-size: 13px;" data-lang="editPackage">编辑套餐</a>
                        </div>
                    </div>
                    
                    <!-- 版本信息 -->
                    <div class="info-card">
                        <h2 class="info-title" data-lang="versionInfo">版本信息</h2>
                        <div style="margin-top: 20px;">
                            <p style="color: #999; font-size: 13px;"><span data-lang="emsVersion">EMS版本</span>：<span style="color: #333;">0.0.1.rc11</span></p>
                        </div>
                        <div style="margin-top: 15px;">
                            <p style="color: #999; font-size: 13px;"><span data-lang="clientVersion">客户端版本</span>：<span style="color: #333;">1.0.12</span> <a href="#" style="color: #5DD5E1; text-decoration: none; font-size: 13px; margin-left: 10px;" data-lang="checkUpdate">检查更新</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 日志下载弹窗 -->
    <div class="modal-overlay" id="logModal">
        <div class="modal-content">
            <div class="modal-header" data-lang="selectLogFiles">选择日志文件</div>
            <div class="modal-body">
                <div class="log-list" id="logList">
                    <!-- 日志文件列表将动态生成 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-secondary" onclick="closeLogDialog()" data-lang="cancel">取消</button>
                <button class="modal-btn modal-btn-primary" onclick="downloadSelectedLogs()" data-lang="confirm">确定</button>
            </div>
        </div>
    </div>
    
    <script>
        // 网络状态检测
        function checkNetworkStatus() {
            const uploadBtn = document.getElementById('logUploadBtn');
            const isOnline = navigator.onLine;
            uploadBtn.disabled = !isOnline;
            if (!isOnline) {
                updateUploadStatus('无网络连接，无法上传', '#999');
            } else if (document.getElementById('uploadStatus').textContent === '无网络连接，无法上传') {
                updateUploadStatus('', '');
            }
        }

        // 更新上传状态显示
        function updateUploadStatus(message, color) {
            const statusElement = document.getElementById('uploadStatus');
            statusElement.textContent = message;
            statusElement.style.color = color || '#666';
            document.getElementById('uploadRetry').style.display = message === '上传失败' ? 'block' : 'none';
        }

        // 上传系统日志到云端
        function uploadSystemLogs() {
            if (!navigator.onLine) {
                updateUploadStatus('无网络连接，无法上传', '#999');
                return;
            }

            updateUploadStatus('正在收集手机日志...', '#666');

            // 模拟系统日志收集过程
            setTimeout(() => {
                updateUploadStatus('上传中...', '#666');

                // 模拟上传到云端过程
                setTimeout(() => {
                    // 随机模拟成功或失败
                    const success = Math.random() > 0.3; // 70%成功率
                    if (success) {
                        updateUploadStatus('上传成功', 'green');
                    } else {
                        updateUploadStatus('上传失败', 'red');
                    }
                }, 1500);
            }, 1000);
        }

        // 初始化网络状态检测
        checkNetworkStatus();
        window.addEventListener('online', checkNetworkStatus);
        window.addEventListener('offline', checkNetworkStatus);

        // 多语言配置
        const translations = {
            zh: {
                deviceManagement: '设备管理',
                data: '数据',
                gatewayStatus: '网关状态',
                commandConfig: '指令配置',
                systemMaintenance: '系统维护',
                advancedSettings: '高级设置',
                alertInfo: '告警信息',
                returnHome: '返回首页',
                langText: '中文简体',
                help: '帮助',
                userManual: '用户手册',
                quickStart: '快速入门指南',
                faq: '常见问题解答',
                factoryReset: '出厂设置',
                factoryResetDesc: '恢复所有设置到出厂默认值，此操作不可逆',
                resetToFactory: '恢复出厂设置',
                firmwareUpdate: '固件更新',
                selectFirmware: '点击选择固件文件或拖拽到此处',
                firmwareHint: '支持 .bin 和 .fw 格式的固件文件',
                packageInfo: '套餐信息',
                currentPackage: '当前套餐',
                versionInfo: '版本信息',
                emsVersion: 'EMS版本',
                clientVersion: '客户端版本',
                checkUpdate: '检查更新',
                firmwareUpdateTitle: '固件更新',
                updateFirmware: '固件更新',
                viewHelp: '查看帮助文档',
                restoreSettings: '重启设备',
                editPackage: '编辑套餐',
                logDownload: '日志下载',
                downloadLog: '日志下载',
                uploadLog: '日志上传',
                uploadHint: '上传日志到云端以便技术支持分析',
                retryUpload: '再次上传',
                selectLogFiles: '选择日志文件',
                cancel: '取消',
                confirm: '确定'
            },
            en: {
                deviceManagement: 'Device Management',
                data: 'Data',
                gatewayStatus: 'Gateway Status',
                commandConfig: 'Command Config',
                systemMaintenance: 'System Maintenance',
                advancedSettings: 'Advanced Settings',
                alertInfo: 'Alert Info',
                returnHome: 'Return Home',
                langText: 'English',
                help: 'Help',
                userManual: 'User Manual',
                quickStart: 'Quick Start Guide',
                faq: 'FAQ',
                factoryReset: 'Factory Reset',
                factoryResetDesc: 'Restore all settings to factory defaults, this operation is irreversible',
                resetToFactory: 'Reset to Factory',
                firmwareUpdate: 'Firmware Update',
                selectFirmware: 'Click to select firmware file or drag here',
                firmwareHint: 'Support .bin and .fw firmware files',
                packageInfo: 'Package Info',
                currentPackage: 'Current Package',
                versionInfo: 'Version Info',
                emsVersion: 'EMS Version',
                clientVersion: 'Client Version',
                checkUpdate: 'Check Update',
                firmwareUpdateTitle: 'Firmware Update',
                updateFirmware: 'Update Firmware',
                viewHelp: 'View Help Document',
                restoreSettings: 'Restart Device',
                editPackage: 'Edit Package',
                logDownload: 'Log Download',
                downloadLog: 'Download Log',
                uploadLog: 'Upload Log',
                uploadHint: 'Upload logs to cloud for technical support analysis',
                retryUpload: 'Retry Upload',
                selectLogFiles: 'Select Log Files',
                cancel: 'Cancel',
                confirm: 'Confirm'
            }
        };
        
        let currentLang = 'zh';
        
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            updateLanguage();
        }
        
        function updateLanguage() {
            document.querySelectorAll('[data-lang]').forEach(element => {
                const key = element.getAttribute('data-lang');
                if (translations[currentLang][key]) {
                    element.textContent = translations[currentLang][key];
                }
            });
        }
        
        // 恢复出厂设置
        function confirmFactoryReset() {
            if (confirm(currentLang === 'zh' ? '确定要恢复出厂设置吗？此操作不可逆！' : 'Are you sure you want to factory reset? This operation is irreversible!')) {
                alert(currentLang === 'zh' ? '正在恢复出厂设置...' : 'Restoring factory settings...');
            }
        }
        
        // 检查更新
        function checkUpdate() {
            alert(currentLang === 'zh' ? '当前已是最新版本' : 'Already the latest version');
        }
        
        // 固件更新
        function updateFirmware() {
            alert(currentLang === 'zh' ? '开始更新固件...' : 'Starting firmware update...');
        }
        
        // 重启设备
        function restoreSettings() {
            if (confirm(currentLang === 'zh' ? '确定要重启设备吗？' : 'Are you sure you want to restart the device?')) {
                alert(currentLang === 'zh' ? '正在重启设备...' : 'Restarting device...');
            }
        }
        
        // 日志文件模拟数据
        const logFiles = [
            { name: 'system_2025-01-11.log' },
            { name: 'error_2025-01-11.log' },
            { name: 'access_2025-01-11.log' },
            { name: 'system_2025-01-10.log' },
            { name: 'error_2025-01-10.log' },
            { name: 'debug_2025-01-11.log' }
        ];
        
        // 显示日志选择弹窗
        function showLogDialog() {
            const modal = document.getElementById('logModal');
            const logList = document.getElementById('logList');
            
            // 清空并生成日志列表
            logList.innerHTML = '';
            logFiles.forEach((log, index) => {
                const logItem = document.createElement('div');
                logItem.className = 'log-item';
                logItem.innerHTML = `
                    <input type="checkbox" class="log-checkbox" id="log_${index}" value="${log.name}">
                    <div class="log-info">
                        <div class="log-name">${log.name}</div>
                    </div>
                `;
                
                // 点击整个项目切换选中状态
                logItem.onclick = function(e) {
                    if (e.target.type !== 'checkbox') {
                        const checkbox = logItem.querySelector('.log-checkbox');
                        checkbox.checked = !checkbox.checked;
                        logItem.classList.toggle('selected', checkbox.checked);
                    }
                };
                
                // 复选框变化时更新样式
                const checkbox = logItem.querySelector('.log-checkbox');
                checkbox.onchange = function() {
                    logItem.classList.toggle('selected', this.checked);
                };
                
                logList.appendChild(logItem);
            });
            
            modal.classList.add('active');
        }
        
        // 关闭日志选择弹窗
        function closeLogDialog() {
            const modal = document.getElementById('logModal');
            modal.classList.remove('active');
        }
        
        // 下载选中的日志
        function downloadSelectedLogs() {
            const checkboxes = document.querySelectorAll('.log-checkbox:checked');
            const selectedLogs = Array.from(checkboxes).map(cb => cb.value);
            
            if (selectedLogs.length === 0) {
                alert(currentLang === 'zh' ? '请至少选择一个日志文件' : 'Please select at least one log file');
                return;
            }
            
            // 模拟下载
            alert(currentLang === 'zh' ? 
                `正在下载 ${selectedLogs.length} 个日志文件...\n${selectedLogs.join('\n')}` : 
                `Downloading ${selectedLogs.length} log files...\n${selectedLogs.join('\n')}`
            );
            
            closeLogDialog();
        }
        
        // 点击遮罩关闭弹窗
        document.getElementById('logModal').onclick = function(e) {
            if (e.target === this) {
                closeLogDialog();
            }
        };
        
        // 菜单点击事件
        document.querySelectorAll('.menu-item').forEach((item, index) => {
            item.addEventListener('click', function() {
                // 根据索引导航到相应页面
                const pages = [
                    'restored_index.html',  // 设备管理
                    'restored_index.html',  // 数据
                    'gateway-status.html',  // 网关状态
                    'restored_index.html',  // 指令配置
                    'system-maintenance.html', // 系统维护
                    'restored_index.html',  // 高级设置
                    'alert-info.html'       // 告警信息
                ];
                
                if (pages[index] && pages[index] !== 'system-maintenance.html') {
                    window.location.href = pages[index];
                } else if (pages[index] === 'system-maintenance.html') {
                    // 当前页面，只更新active状态
                    document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>