<!-- 通用侧边栏导航 -->
<aside class="sidebar" id="sidebar">
    <div class="logo">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="9" cy="9" r="2"/>
            <path d="m21 15-3.086-3.086a2 2 0 0 0-1.414-.586H14l-2-2 2-2h2.5a2 2 0 0 0 1.414-.586L21 9"/>
        </svg>
        <span class="logo-text">管理系统</span>
    </div>
    
    <nav class="nav">
        <!-- 首页 -->
        <a href="index.html" class="nav-item" data-page="home">
            <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
            </span>
            <span class="nav-text">首页</span>
        </a>

        <!-- 产品中心 -->
        <a href="products.html" class="nav-item" data-page="products">
            <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <rect x="7" y="7" width="3" height="3"/>
                    <rect x="14" y="7" width="3" height="3"/>
                    <rect x="7" y="14" width="3" height="3"/>
                    <rect x="14" y="14" width="3" height="3"/>
                </svg>
            </span>
            <span class="nav-text">产品中心</span>
        </a>

        <!-- 解决方案 -->
        <a href="solutions.html" class="nav-item" data-page="solutions">
            <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
            </span>
            <span class="nav-text">解决方案</span>
        </a>

        <!-- 帮助中心 -->
        <div class="nav-group" id="helpCenterGroup">
            <a href="#" class="nav-item" id="helpCenterNav" data-page="help-center">
                <span class="nav-icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <circle cx="12" cy="17" r="0.5"/>
                    </svg>
                </span>
                <span class="nav-text">帮助中心</span>
                <span class="nav-arrow">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M6 4l4 4-4 4"/>
                    </svg>
                </span>
            </a>
            <div class="nav-submenu" id="helpSubmenu">
                <a href="documents.html" class="nav-subitem" data-section="documents">
                    <span class="nav-text">文档资料</span>
                </a>
                <a href="online-help.html" class="nav-subitem" data-section="online-help">
                    <span class="nav-text">在线帮助</span>
                </a>
            </div>
        </div>

        <!-- 关于我们 -->
        <div class="nav-group" id="aboutUsGroup">
            <a href="#" class="nav-item" id="aboutUsNav" data-page="about-us">
                <span class="nav-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="8.5" cy="7" r="4"/>
                        <path d="M20 8v6M23 11h-6"/>
                    </svg>
                </span>
                <span class="nav-text">关于我们</span>
                <span class="nav-arrow">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M6 4l4 4-4 4"/>
                    </svg>
                </span>
            </a>
            <div class="nav-submenu" id="aboutSubmenu">
                <a href="about-xuhenew.html" class="nav-subitem" data-section="about-xuhenew">
                    <span class="nav-text">关于旭衡</span>
                </a>
                <a href="join-us.html" class="nav-subitem" data-section="join-us">
                    <span class="nav-text">加入我们</span>
                </a>
                <a href="contact-us.html" class="nav-subitem" data-section="contact-us">
                    <span class="nav-text">联系我们</span>
                </a>
                <a href="latest-news.html" class="nav-subitem" data-section="latest-news">
                    <span class="nav-text">最新动态</span>
                </a>
            </div>
        </div>

        <!-- 云平台Demo -->
        <a href="cloud-demo.html" class="nav-item" data-page="cloud-demo">
            <span class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
                </svg>
            </span>
            <span class="nav-text">云平台Demo</span>
        </a>
    </nav>
</aside>

<script>
// 通用侧边栏功能
function initUniversalSidebar() {
    // 获取当前页面路径
    const currentPath = window.location.pathname;
    const currentPage = currentPath.substring(currentPath.lastIndexOf('/') + 1);
    
    // 设置当前页面对应的导航项为活跃状态
    setActiveNavigation(currentPage);
    
    // 初始化导航项点击事件
    initNavigationEvents();
    
    // 初始化子菜单事件
    initSubmenuEvents();
}

function setActiveNavigation(currentPage) {
    // 清除所有活跃状态
    document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
    document.querySelectorAll('.nav-subitem').forEach(item => item.classList.remove('active'));
    document.querySelectorAll('.nav-group').forEach(group => group.classList.remove('expanded'));
    
    // 根据当前页面设置活跃状态
    switch(currentPage) {
        case 'index.html':
        case '':
            document.querySelector('.nav-item[data-page="home"]')?.classList.add('active');
            break;
        case 'products.html':
            document.querySelector('.nav-item[data-page="products"]')?.classList.add('active');
            break;
        case 'solutions.html':
            document.querySelector('.nav-item[data-page="solutions"]')?.classList.add('active');
            break;
        case 'documents.html':
            document.getElementById('helpCenterGroup').classList.add('expanded');
            document.getElementById('helpCenterNav').classList.add('active');
            document.querySelector('.nav-subitem[data-section="documents"]')?.classList.add('active');
            break;
        case 'online-help.html':
            document.getElementById('helpCenterGroup').classList.add('expanded');
            document.getElementById('helpCenterNav').classList.add('active');
            document.querySelector('.nav-subitem[data-section="online-help"]')?.classList.add('active');
            break;
        case 'admin-dashboard.html':
            // 特殊处理：管理后台页面可能需要保持帮助中心展开
            if (document.getElementById('helpContent')?.style.display !== 'none') {
                document.getElementById('helpCenterGroup').classList.add('expanded');
                document.getElementById('helpCenterNav').classList.add('active');
            }
            break;
        case 'about-xuhenew.html':
            document.getElementById('aboutUsGroup').classList.add('expanded');
            document.getElementById('aboutUsNav').classList.add('active');
            document.querySelector('.nav-subitem[data-section="about-xuhenew"]')?.classList.add('active');
            break;
        case 'join-us.html':
            document.getElementById('aboutUsGroup').classList.add('expanded');
            document.getElementById('aboutUsNav').classList.add('active');
            document.querySelector('.nav-subitem[data-section="join-us"]')?.classList.add('active');
            break;
        case 'contact-us.html':
            document.getElementById('aboutUsGroup').classList.add('expanded');
            document.getElementById('aboutUsNav').classList.add('active');
            document.querySelector('.nav-subitem[data-section="contact-us"]')?.classList.add('active');
            break;
        case 'latest-news.html':
            document.getElementById('aboutUsGroup').classList.add('expanded');
            document.getElementById('aboutUsNav').classList.add('active');
            document.querySelector('.nav-subitem[data-section="latest-news"]')?.classList.add('active');
            break;
        case 'cloud-demo.html':
            document.querySelector('.nav-item[data-page="cloud-demo"]')?.classList.add('active');
            break;
    }
}

function initNavigationEvents() {
    // 一级菜单点击事件
    document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', function(e) {
            const textElement = this.querySelector('.nav-text');
            if (!textElement) return;
            
            const title = textElement.textContent.trim();
            
            if (title === '帮助中心') {
                e.preventDefault();
                // 切换帮助中心子菜单展开状态
                const navGroup = this.closest('.nav-group');
                navGroup.classList.toggle('expanded');
                
                // 如果展开，设置为活跃状态
                if (navGroup.classList.contains('expanded')) {
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                }
            } else if (title === '关于我们') {
                e.preventDefault();
                // 切换关于我们子菜单展开状态
                const navGroup = this.closest('.nav-group');
                navGroup.classList.toggle('expanded');
                
                // 如果展开，设置为活跃状态
                if (navGroup.classList.contains('expanded')) {
                    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                }
            }
            // 其他导航项保持默认行为（页面跳转）
        });
    });
}

function initSubmenuEvents() {
    // 子菜单项点击事件
    document.querySelectorAll('.nav-subitem').forEach(item => {
        item.addEventListener('click', function(e) {
            // 移除其他子项的活跃状态
            document.querySelectorAll('.nav-subitem').forEach(subitem => {
                subitem.classList.remove('active');
            });
            // 添加当前子项的活跃状态
            this.classList.add('active');
            
            // 保持父级菜单的活跃状态
            const parentGroup = this.closest('.nav-group');
            const parentNavItem = parentGroup.querySelector('.nav-item');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            parentNavItem.classList.add('active');
        });
    });
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', function() {
    initUniversalSidebar();
});
</script>