<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主题可见性测试</title>
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="tech-ui-enhancement.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            padding: 40px;
            min-height: 100vh;
            overflow: auto;
        }

        .test-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .test-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: var(--surface-color);
            border-radius: 16px;
            box-shadow: var(--card-shadow);
        }

        .test-title {
            font-size: 36px;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .test-subtitle {
            font-size: 18px;
            color: var(--text-secondary-color);
        }

        .theme-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .theme-btn {
            padding: 12px 24px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--surface-color);
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
        }

        .theme-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--hover-shadow);
        }

        .theme-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .test-card {
            background: var(--surface-color);
            border-radius: 16px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            background: #e3f2fd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1e90ff;
            font-size: 20px;
        }

        .test-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .test-item {
            padding: 15px;
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .text-primary {
            color: var(--primary-color);
        }

        .text-secondary {
            color: var(--text-secondary-color);
        }

        .bg-success {
            background: var(--success-color);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
        }

        .bg-warning {
            background: var(--warning-color);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
        }

        .bg-error {
            background: var(--error-color);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
        }

        .form-example {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--background-color);
            color: var(--text-color);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--hover-shadow);
        }

        .visibility-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .visibility-table th,
        .visibility-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        .visibility-table th {
            background: var(--secondary-color);
            font-weight: 600;
            color: var(--text-color);
        }

        .visibility-table tr:hover {
            background: var(--secondary-color);
        }

        .color-sample {
            display: inline-block;
            width: 80px;
            height: 30px;
            border-radius: 4px;
            vertical-align: middle;
            margin-right: 10px;
            border: 1px solid var(--border-color);
        }

        .theme-info {
            background: var(--surface-color);
            border-radius: 16px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 14px;
            color: var(--text-secondary-color);
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-color);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <!-- 测试头部 -->
        <div class="test-header">
            <h1 class="test-title">主题可见性测试</h1>
            <p class="test-subtitle">验证不同主题下的内容可见性和对比度</p>
        </div>

        <!-- 主题选择器 -->
        <div class="theme-selector">
            <button class="theme-btn" onclick="setTheme('light')">☀️ 浅色主题</button>
            <button class="theme-btn" onclick="setTheme('dark')">🌙 深色主题</button>
            <button class="theme-btn" onclick="setTheme('blue')">💙 科技蓝</button>
            <button class="theme-btn" onclick="setTheme('green')">💚 自然绿</button>
        </div>

        <!-- 主题信息 -->
        <div class="theme-info">
            <h2 class="card-title">当前主题信息</h2>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">主题名称</div>
                    <div class="info-value" id="themeName">浅色主题</div>
                </div>
                <div class="info-item">
                    <div class="info-label">背景色</div>
                    <div class="info-value" id="bgColor">#ffffff</div>
                </div>
                <div class="info-item">
                    <div class="info-label">文字色</div>
                    <div class="info-value" id="textColor">#1a1a1a</div>
                </div>
                <div class="info-item">
                    <div class="info-label">主色调</div>
                    <div class="info-value" id="primaryColor">#1e90ff</div>
                </div>
            </div>
        </div>

        <!-- 测试内容网格 -->
        <div class="test-grid">
            <!-- 文字对比度测试 -->
            <div class="test-card">
                <h3 class="card-title">
                    <div class="section-icon">📝</div>
                    文字对比度测试
                </h3>
                <div class="test-content">
                    <div class="test-item">
                        <p>主要文字：这是主要文字内容，应该清晰可见。</p>
                    </div>
                    <div class="test-item">
                        <p class="text-secondary">次要文字：这是次要文字内容，对比度稍低但仍应可读。</p>
                    </div>
                    <div class="test-item">
                        <p class="text-primary">主题色文字：这是使用主题色的文字。</p>
                    </div>
                    <div class="test-item">
                        <p>中文内容：储能柜管理系统的各项参数显示正常。</p>
                        <p>English Content: The energy storage system parameters are displayed correctly.</p>
                    </div>
                </div>
            </div>

            <!-- 色彩样本测试 -->
            <div class="test-card">
                <h3 class="card-title">
                    <div class="section-icon">🎨</div>
                    色彩样本测试
                </h3>
                <div class="test-content">
                    <div class="test-item">
                        <span class="color-sample" style="background: var(--primary-color)"></span>
                        主色调
                    </div>
                    <div class="test-item">
                        <span class="color-sample" style="background: var(--success-color)"></span>
                        成功色
                    </div>
                    <div class="test-item">
                        <span class="color-sample" style="background: var(--warning-color)"></span>
                        警告色
                    </div>
                    <div class="test-item">
                        <span class="color-sample" style="background: var(--error-color)"></span>
                        错误色
                    </div>
                </div>
            </div>

            <!-- 表单元素测试 -->
            <div class="test-card">
                <h3 class="card-title">
                    <div class="section-icon">📋</div>
                    表单元素测试
                </h3>
                <div class="form-example">
                    <input type="text" class="form-input" placeholder="请输入文字">
                    <select class="form-input">
                        <option>选项 1</option>
                        <option>选项 2</option>
                        <option>选项 3</option>
                    </select>
                    <button class="btn btn-primary">主要按钮</button>
                </div>
            </div>

            <!-- 状态标签测试 -->
            <div class="test-card">
                <h3 class="card-title">
                    <div class="section-icon">🏷️</div>
                    状态标签测试
                </h3>
                <div class="test-content">
                    <div class="test-item">
                        <span class="bg-success">成功状态</span>
                    </div>
                    <div class="test-item">
                        <span class="bg-warning">警告状态</span>
                    </div>
                    <div class="test-item">
                        <span class="bg-error">错误状态</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 可见性对比表格 -->
        <div class="test-card">
            <h3 class="card-title">
                <div class="section-icon">📊</div>
                可见性对比表格
            </h3>
            <table class="visibility-table">
                <thead>
                    <tr>
                        <th>元素类型</th>
                        <th>示例内容</th>
                        <th>可见性状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>标题文字</td>
                        <td style="font-size: 20px; font-weight: 600;">储能柜管理系统</td>
                        <td>✅ 清晰可见</td>
                    </tr>
                    <tr>
                        <td>正文文字</td>
                        <td>系统运行状态正常，所有参数在合理范围内。</td>
                        <td>✅ 清晰可见</td>
                    </tr>
                    <tr>
                        <td>次要文字</td>
                        <td class="text-secondary">更新时间：2024-01-31 14:30:00</td>
                        <td>✅ 可见</td>
                    </tr>
                    <tr>
                        <td>链接文字</td>
                        <td class="text-primary">查看详细信息</td>
                        <td>✅ 突出显示</td>
                    </tr>
                    <tr>
                        <td>禁用文字</td>
                        <td style="opacity: 0.5;">此功能暂不可用</td>
                        <td>⚠️ 低对比度</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 说明信息 -->
        <div class="test-card">
            <h3 class="card-title">
                <div class="section-icon">ℹ️</div>
                主题系统说明
            </h3>
            <div class="test-content">
                <div class="test-item">
                    <p>✅ <strong>修复完成：</strong>移除了所有页面中的 filter: invert() 样式，确保内容正常显示</p>
                </div>
                <div class="test-item">
                    <p>✅ <strong>CSS变量系统：</strong>使用CSS自定义属性实现主题切换，确保颜色一致性</p>
                </div>
                <div class="test-item">
                    <p>✅ <strong>对比度优化：</strong>每个主题都经过精心调配，确保文字与背景有足够的对比度</p>
                </div>
                <div class="test-item">
                    <p>✅ <strong>图标处理：</strong>深色主题下图标容器保持白色背景，确保图标清晰可见</p>
                </div>
            </div>
        </div>
    </div>

    <script src="theme-manager.js"></script>
    <script>
        // 主题信息
        const themeInfo = {
            light: { name: '浅色主题', bg: '#ffffff', text: '#1a1a1a', primary: '#1e90ff' },
            dark: { name: '深色主题', bg: '#0f172a', text: '#f1f5f9', primary: '#3b82f6' },
            blue: { name: '科技蓝', bg: '#000d1a', text: '#e0f2fe', primary: '#00d4ff' },
            green: { name: '自然绿', bg: '#052e16', text: '#dcfce7', primary: '#22c55e' }
        };

        // 设置主题
        function setTheme(theme) {
            ThemeManager.setTheme(theme);
            updateThemeInfo(theme);
            updateButtonStates(theme);
        }

        // 更新主题信息显示
        function updateThemeInfo(theme) {
            const info = themeInfo[theme];
            document.getElementById('themeName').textContent = info.name;
            document.getElementById('bgColor').textContent = info.bg;
            document.getElementById('textColor').textContent = info.text;
            document.getElementById('primaryColor').textContent = info.primary;
        }

        // 更新按钮状态
        function updateButtonStates(theme) {
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const themeMap = {
                light: 0,
                dark: 1,
                blue: 2,
                green: 3
            };
            
            const buttons = document.querySelectorAll('.theme-btn');
            if (buttons[themeMap[theme]]) {
                buttons[themeMap[theme]].classList.add('active');
            }
        }

        // 页面加载时初始化
        window.addEventListener('DOMContentLoaded', () => {
            const currentTheme = ThemeManager.getCurrentTheme();
            updateThemeInfo(currentTheme);
            updateButtonStates(currentTheme);
        });
    </script>
</body>
</html>