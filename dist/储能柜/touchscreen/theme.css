/* 主题变量定义 */
:root {
    /* 默认浅色主题 */
    --primary-color: #1e90ff;
    --secondary-color: #f0f2f5;
    --background-color: #ffffff;
    --surface-color: #f8f9fa;
    --text-color: #1a1a1a;
    --text-secondary-color: #666666;
    --border-color: #e5e7eb;
    --success-color: #10b981;
    --warning-color: #f59e0b;
    --error-color: #ef4444;
    --header-bg: linear-gradient(135deg, #1e3a5f 0%, #0a1628 100%);
    --card-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    --hover-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    
    /* 动画时间 */
    --transition-time: 0.3s;
}

/* 全局样式应用 */
body {
    background-color: var(--background-color) !important;
    color: var(--text-color) !important;
    transition: background-color var(--transition-time), color var(--transition-time);
    /* 移除任何filter效果，确保内容正常显示 */
    filter: none !important;
}

/* 头部导航主题适配 */
.header {
    background: var(--header-bg) !important;
    transition: background var(--transition-time);
}

/* 侧边栏主题适配 */
.sidebar {
    background: var(--surface-color) !important;
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1) !important;
    transition: all var(--transition-time);
}

.nav-item {
    color: var(--text-secondary-color) !important;
}

.nav-item:hover {
    background: var(--secondary-color) !important;
    color: var(--primary-color) !important;
}

.nav-item.active {
    color: var(--primary-color) !important;
}

/* 内容区域主题适配 */
.content {
    background: var(--secondary-color) !important;
}

/* 卡片主题适配 */
.overview-card,
.param-section,
.control-section,
.settings-section,
.chart-container,
.alarm-table,
.filter-bar {
    background: var(--surface-color) !important;
    box-shadow: var(--card-shadow) !important;
    transition: all var(--transition-time);
}

.overview-card:hover,
.param-item:hover {
    box-shadow: var(--hover-shadow) !important;
}

/* 表单元素主题适配 */
.form-input,
.param-input,
.filter-select {
    background: var(--background-color) !important;
    border-color: var(--border-color) !important;
    color: var(--text-color) !important;
    transition: all var(--transition-time);
}

.form-input:focus,
.param-input:focus {
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 3px rgba(var(--primary-color), 0.1) !important;
}

/* 按钮主题适配 */
.btn-primary,
.action-btn.primary,
.control-btn.charge {
    background: var(--primary-color) !important;
    color: white !important;
}

.btn-secondary,
.action-btn {
    background: var(--surface-color) !important;
    color: var(--text-color) !important;
    border-color: var(--border-color) !important;
}

/* 文本颜色适配 */
.section-title,
.chart-title,
.card-title,
.form-label,
.param-label {
    color: var(--text-color) !important;
}

.cabinet-status,
.stat-label,
.info-label,
.filter-label {
    color: var(--text-secondary-color) !important;
}

/* 状态颜色 */
.status-normal,
.trend-up {
    color: var(--success-color) !important;
}

.status-warning {
    background-color: var(--warning-color) !important;
}

.status-error,
.trend-down {
    color: var(--error-color) !important;
}

/* 快速主题切换器样式 */
.theme-switcher {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 1000;
    display: flex;
    gap: 10px;
    padding: 10px;
    background: var(--surface-color);
    border-radius: 50px;
    box-shadow: var(--hover-shadow);
    transition: all var(--transition-time);
}

.theme-switcher-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all var(--transition-time);
    position: relative;
    overflow: hidden;
}

.theme-switcher-btn:hover {
    transform: scale(1.1);
    border-color: var(--primary-color);
}

.theme-switcher-btn.active {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.2);
}

.theme-switcher-btn[data-theme="light"] {
    background: linear-gradient(135deg, #ffffff 50%, #f0f2f5 50%);
}

.theme-switcher-btn[data-theme="dark"] {
    background: linear-gradient(135deg, #0f172a 50%, #1e293b 50%);
}

.theme-switcher-btn[data-theme="blue"] {
    background: linear-gradient(135deg, #000d1a 50%, #001e3c 50%);
}

.theme-switcher-btn[data-theme="green"] {
    background: linear-gradient(135deg, #052e16 50%, #14532d 50%);
}

/* 主题切换动画 */
@keyframes themeTransition {
    0% { opacity: 0.8; }
    50% { opacity: 0.6; }
    100% { opacity: 1; }
}

body.theme-transitioning {
    animation: themeTransition 0.5s ease;
}

/* 深色主题特殊处理 */
[data-theme="dark"] .overview-card,
[data-theme="dark"] .param-section,
[data-theme="dark"] .control-section {
    border: 1px solid var(--border-color);
}

[data-theme="dark"] .form-input,
[data-theme="dark"] .param-input {
    background: var(--surface-color) !important;
}

[data-theme="dark"] .table-row:hover {
    background: var(--surface-color) !important;
}

/* 深色主题下的图标卡片保持白色背景 */
body[data-theme="dark"] .logo-icon,
body[data-theme="dark"] .section-icon,
body[data-theme="dark"] .card-icon,
body[data-theme="blue"] .logo-icon,
body[data-theme="blue"] .section-icon,
body[data-theme="blue"] .card-icon,
body[data-theme="green"] .logo-icon,
body[data-theme="green"] .section-icon,
body[data-theme="green"] .card-icon,
.theme-dark .logo-icon,
.theme-dark .section-icon,
.theme-dark .card-icon,
.theme-blue .logo-icon,
.theme-blue .section-icon,
.theme-blue .card-icon,
.theme-green .logo-icon,
.theme-green .section-icon,
.theme-green .card-icon {
    background: white !important;
    color: #1a1a1a !important;
}

/* 深色模式下确保图标内的图片正常显示 */
body[data-theme="dark"] .logo-icon img,
body[data-theme="blue"] .logo-icon img,
body[data-theme="green"] .logo-icon img,
.theme-dark .logo-icon img,
.theme-blue .logo-icon img,
.theme-green .logo-icon img {
    filter: none !important;
}

/* 确保深色主题下图标内的emoji和文字显示正常 */
body[data-theme="dark"] .section-icon,
body[data-theme="blue"] .section-icon,
body[data-theme="green"] .section-icon,
body[data-theme="dark"] .card-icon,
body[data-theme="blue"] .card-icon,
body[data-theme="green"] .card-icon {
    filter: none !important;
}

/* 响应式主题切换器 */
@media (max-width: 768px) {
    .theme-switcher {
        bottom: 20px;
        right: 20px;
        gap: 8px;
        padding: 8px;
    }
    
    .theme-switcher-btn {
        width: 35px;
        height: 35px;
    }
}