<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug i18n</title>
    <script src="components/i18n.js"></script>
    <script src="components/header-nav.js"></script>
</head>
<body>
    <div id="headerContainer"></div>
    
    <h1 data-i18n-key="analysis.title">历史数据深度分析 - U Energy</h1>
    <p data-i18n-key="analysis.realtime">实时分析</p>
    <p data-i18n-key="analysis.historical">历史分析</p>
    <p data-i18n-key="analysis.priceAnalysis">价格分析</p>
    
    <script>
        // 等待DOM加载完成
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化HeaderNav
            new HeaderNav({
                currentPage: 'analysis',
                showMessageCenter: true,
                showUserAvatar: true,
                showLanguageSelector: true
            });
            
            // 手动测试
            window.testI18n = function() {
                console.log('=== Manual i18n Test ===');
                console.log('window.i18n:', window.i18n);
                console.log('Current language:', window.i18n.currentLanguage);
                console.log('Test getText:', window.i18n.getText('analysis.title'));
                
                // 测试切换到英文
                window.i18n.setLanguage('en');
                
                setTimeout(() => {
                    console.log('After switch to en:');
                    console.log('Current language:', window.i18n.currentLanguage);
                    console.log('Test getText:', window.i18n.getText('analysis.title'));
                }, 100);
            };
            
            // 重置功能
            window.resetI18n = function() {
                if (window.i18n) {
                    window.i18n.resetLanguage();
                    console.log('Language reset to default');
                }
            };
            
            // 强制更新
            window.forceUpdate = function() {
                if (window.i18n) {
                    window.i18n.updatePageTexts();
                    console.log('Page texts updated');
                }
            };
        });
    </script>
</body>
</html>